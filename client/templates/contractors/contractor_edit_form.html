<div class="container">

    <form class="form" ng-submit="contarctors.editContractor()">
        <fieldset>
            <legend>{{ formTitle }}</legend>

            <label for="contractorTitle">Наименование</label>
            <input type="text" name="contractorTitle" id="contractorTitle"  placeholder="Наименование" ng-model="contractors.currentContractor.title.value" ng-change="contractors.currentContractor.setToChanged()" ng-disabled="!contractors.currentContractor.inEditMode"/>

            <label for="contractorFullTitle">Полное наименование</label>
            <input type="text" name="contractorFullTitle" id="contractorFullTitle" ng-model="contractors.currentContractor.fullTitle.value" ng-change="contractors.currentContractor.setToChanged()" ng-change="contractors.currentContractor.setToChanged()" ng-disabled="!contractors.currentContractor.inEditMode"/>

            <label for="contractorType">Тип контрагента</label>
            <select name="contractorType" id="contractorType" placeholder="Выберите тип" ng-model="contractors.currentContractor.contractorTypeId.value" ng-options="type.id.value as type.title.value for type in contractors.contractorTypes.items" ng-change="contractors.currentContractor.setToChanged()"  ng-disabled="!contractors.currentContractor.inEditMode"></select>

            <div class="controls" ng-show="!contractors.currentContractorIsDeleted">
                <input type="button" class="button-link" value="Изменить" ng-show="!contractors.currentContractor.inEditMode && !contractors.currentContractor.inDeleteMode" ng-click="contractors.currentContractor.setToEditMode()"/>
                <input type="button" class="button-link" ng-show="!contractors.currentContractor.inDeleteMode && !contractors.currentContractor.inEditMode" value="Удалить" ng-click="contractors.currentContractor.setToDeleteMode()"/>
                <input type="button" class="button-link" ng-show="contractors.currentContractor.inEditMode && contractors.currentContractor.isChanged" value="Сохранить изменения" ng-click="contractors.editContractor(contractors.currentContractor.id.value)"/>
                <input type="button" class="button-link" ng-show="contractors.currentContractor.inDeleteMode" value="Подтвердить удаление" ng-disabled="contractors.currentContractor.deleteInProgress" ng-click="contractors.deleteContractor(contractors.currentContractor)"/>
                <input type="button" class="button-link" ng-show="contractors.currentContractor.inDeleteMode || contractors.currentContractor.inEditMode" value="Отмена" ng-click="contractors.currentContractor.cancelModes();"/>
            </div>

            <!-- Ошибки при валидации формы -->
            <div class="error" ng-show="contractors.contractors.errors.length > 0">
                <div class="error-item" ng-repeat="error in contractors.contractors.errors track by $index">{{ error }}</div>
            </div>

            <div class="success" ng-show="contractors.currentContractorIsDeleted">
                Контрагент успешно удален
            </div>
        </fieldset>
    </form>

</div>
